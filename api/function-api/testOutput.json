{"numFailedTestSuites":1,"numFailedTests":9,"numPassedTestSuites":0,"numPassedTests":10,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":19,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1633068095526,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz None prevents authorization","location":null,"status":"passed","title":"None prevents authorization"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Authentication undefined prevents authorization","location":null,"status":"passed","title":"Authentication undefined prevents authorization"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Authorization must not be empty when required","location":null,"status":"passed","title":"Authorization must not be empty when required"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Caller must always be present","location":null,"status":"passed","title":"Caller must always be present"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-227507753/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:49 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"5103\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayA0Ljg0IG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"13ef-JgLc9qpXVjrz/5J5MkUgP0H949w\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-227507753\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-227507753/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-227507753/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a44c-19f20aa77b811223393053d2\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n  },\n  \"caller\": {\n    \"permissions\": {\n      \"allow\": [\n        {\n          \"action\": \"*\",\n          \"resource\": \"/\"\n        }\n      ]\n    }\n  },\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJIMEYCIQC50Gyzh1ukSx2RQDNEVKrbKWUIKEm1hmPPLFVsDqhQTAIhAKNjHsn6o8uCe7a0cOVjO+HTwaD3mvrSVc/iIqVFmB79KrYCCOf//////////wEQAhoMNzQ5Nzc1MzQ2ODU3IgxnOE+XSxxxAiqXl0YqigIcXZu2csQNA4K5AAQiMyKj5t6c7fdGseYMO0Pd3cTaQASI4khxvDEL9wmQmQHdQsM0aQXFvHx0GHLC4gPU0Nk6mquH+M0XIrpdDlwmmjTAE1NnAVmLg70wKulM+Jt8oan9gMmUyxZntxeeNc6xNFJ9uPtSCybrCYtq5AdF7p7R72z1qJcaejSK7F4czwTXf3nhTeJkrbNQt13hxl/vciHhJNADpvKIUmNTEkcY9O0M3E4bF6t+dgOKFqq3LxOaxrkYdYF5zIjPyqT3DHrlFhPKhu1ngAhZgJPt+C0zbZtzjiLdXIuv6k7Vn2RUCmylyYF3AUGV9gdmRwk1aT2DvVwlSQfABFIWJLWyzjDNyNqKBjqZAeIPKRWzdLrWP88WL7pOZYVLn3KyBqk55KpTkHx79BOBYGVsCp6oICMDuap4upIGUGAzq5VBn5b3gkRi63ViFPpk8ugzS+APt1j58Tnn0TogUqLpAtNVCkzrDCVeX4kwLCBMkWqF8nZgGYj4DEAGpDrW+lIbATFjv536PSWXw+D1ZDDuKIw3Z72JkL0tKJpEaANZfzNNI7xp8g==\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/4524b0eeedee0cf63a9c5a616435bf93604358a7\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]ca6c8b6615c741d1b59cdcc4455c6220\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"4524b0eeedee0cf63a9c5a616435bf93604358a7\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"YAcgkcjmE4u/XOWHrohwp+1NLlDZYekDZ0UOhrdL\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUTYOWGXPZ\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a44d-24c266ae4762b86c69dd8881;Parent=22b690e837901226;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:92:5)"],"fullName":"Function Authz Optional | No AuthZ | Valid","location":null,"status":"failed","title":"Optional | No AuthZ | Valid"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-13333353/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:50 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"2973\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAyLjM5IG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"b9d-/gkG0UStW1G1IqC16gGHT0BJKQo\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-13333353\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-13333353/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-13333353/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a44e-7c43cade6a9284805d85c1bd\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Bearer abcdefg\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n  },\n  \"caller\": {},\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQD0NUB8pPn61gI6LyU4jmcOSyvjykqzhkmzjkByT+YfyQIgDA2XuJHYzx+cHKh7lIIbnSft+xVOEOMoJTNQciQgAwMqtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDDfstD+m99B2Igd8bSqKAkH87NhBR/SZyUAfE8npT6T3UJpm3+AaiVL6A/5ANCWZqUDeNBU/+GDDz3xlAklgCsDrtESPK5jFOgzCgeZBtaX21r7iA0Xe4d9MieK8EpkPcMQtSu0/Jt5VDREhCtyn9/km+uLHXY/ncJ4LsJ7yBUctDGCGhnYYjCXYieWB7gJAM+lQAH+gVvqAGZT57qHdTIHzObM37Hq993slqizciG87T+N763Xzb/MFm/aq5zGsfhwVma3bHkQX4zG0KbLxwCZeHqVnJQ9hOoQOs7S/UUlZP7R1JHg3eq+8i4r/Zs/YYCeM4nfsBaG/xmuZFsxAklnf9rLtzElByo1k1cI0d7k+1jo8dL33GzK9MM7I2ooGOpoB1LsqJgV15/kvPCoVbBnX7X8hvZh6fpBoBWSiRC+euJLhPGuXHM3DjkBDA2qLPKNLy+Yfy8fu7PoSPeowUhHw74qe4AzYN0yHC+jMNF/NKssGdVKnHy/YvaORyo1n93N4B0hXZIN2VmLyHL3PDx76mVL/lHJyIEq5jUILNxFBT6PVnRvOsY1Ft2tvryywhsR62GjrsMX135EOrg==\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/4b16dd2adcbe58c594efc9569953ca573d26592a\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]a030a23b399c4b9a9e19f08bf35e77df\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"4b16dd2adcbe58c594efc9569953ca573d26592a\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"NaI2kbB70CQAUssypamKPoQbrssLbrx3Kbtut/HY\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SU7Y2ZFHCS\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a44e-72bc295852bf8b0c5e7a1e8d;Parent=38bd0e170aeba7c5;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:99:5)"],"fullName":"Function Authz Optional | No AuthZ | Bad","location":null,"status":"failed","title":"Optional | No AuthZ | Bad"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-422133445/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:51 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"2943\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAzLjIzIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"b7f-B8t+wgB+NIzH1hION/pDWXWFkRQ\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-422133445\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-422133445/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-422133445/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a44f-71ba5990040f039c29f85ddd\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n  },\n  \"caller\": {},\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQCq0mucjg8yYoDkrTWtw8K2TChDuXVuE3iCU7SXsRSaLQIgP/5144O2NLO+PNufYanEHluOieqPymH1adhvj/hlbJ0qtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDLApAA88uPqRCMxPIiqKAm0gP1V1ctqIaFVwEh4QgrQZFtkrQsorMVLsj7xasEhVjY8z7h2wdjAJvmfBVZUNq6NvZgHD+NLflD5p6VCgrK+1OrtbSPK7f4YgfHvka+ALo5DxYFN55Vs1iTfpdmokp3sggS+1STzecipMXzc2+/td3R5kNlpA1c0SZC8xiywaM2f1sOh/LZhp2DJXba8BePPifKPJlLfYfFy2a4hYS61BkjVpeaqGHIWXvZ0p+sLyIXjZ9K+TxH/SpSk93MeYlRluszUtJzJbqhKzIjYQJoY9FPyApVfLCY88BJUirq+XkALwvDs4A0ShAwMgTVSxk2uIsbMiyC2cGRWxyxpvNVHDIsgxIszLALmYMM/I2ooGOpoBmFiSu5/LEF+xyz6podj14qnrzEi834YdeX2fmNCIv8MsQr1DsppbQtNw4GA8oScZ+0tRs+/XbTOLJi+szKFohW5YSS5H/TE3whrM0b1jMx2/P122Kd0rv16+583F9dq7DmVN2bF08SyOl7d/BT+Nw/lKhZ5n1F36+YgcVzhZT9AZPpCZ4+92uv2hnXqZn6IH/HGEcmzeTdzWZQ==\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/230009f33c05f8051170532e038ce200284e9d64\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]5dac250dc10647aa885f0f870a26cdfd\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"230009f33c05f8051170532e038ce200284e9d64\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"M49ojVPa+wdJplxPssyXfR1KeZjMn9FRauJ+K97I\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUYNMHOU3E\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a44f-40ced66e54d3f8ab7ae6a60f;Parent=4817b9051e6ac6d9;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:106:5)"],"fullName":"Function Authz Optional | No AuthZ | Empty","location":null,"status":"failed","title":"Optional | No AuthZ | Empty"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-167347340/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:52 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"5103\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAxMi4xMyBtcyBhbmQgdXNlZCA1MyBNQiBvZiBtZW1vcnku\",\n  \"etag\": \"W/\\\"13ef-fkz/DfM7OF7oQgNY2s2mOxK3t1c\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-167347340\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-167347340/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-167347340/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a450-2f11a2e868661ec46fbb670b\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n  },\n  \"caller\": {\n    \"permissions\": {\n      \"allow\": [\n        {\n          \"action\": \"*\",\n          \"resource\": \"/\"\n        }\n      ]\n    }\n  },\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQCAvtFnffZOcxnAc8OeCeBwkwatUll2wJdV84DzNuF4GwIgcNwZzmNCNw2sKJ0A9GTs9kKY+x3hNefdZ/AGnGy0CAoqtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDKK5MFT0T5XHgS7lRiqKAm7kRrYjFLtd7RKehDy9hqDPThLzPt1w9IRFLF6PmFFRxzTGAz+1J7LrOFymNsipkhWEW6xW+xjdGyRXa9DXMHh6lPUcA4VWaZLTrhkpfi9+dMYgQTG0T3LHJPqs/sNVeVoj43DnX11f50WW/oGPBKGEFwY6aOWSSBofxwRNimPDcqC0HPQ/dQnFTf557zAbFoIUsjcO42ZSEzu2Kj3R3kQL1r7ueAyF+XPpkcv8I08bFWZ8CZtWMQKK8AXtdLR57pcWSMQSPTTW7v1K/W08lytvdEM/+CuKQNkwfbPd25vkXbmc3PdaFj8fJ5DB7uJgbIiupFwdlIGbPeT91n33edl7se0Cqr69q6dUMNDI2ooGOpoB25iJznIRIsdwTNVFoTLnIkc0lX/aE1EJ26bwAw7jWp86q6UflVR2j1HaUE4dbIcpC1OMv+sEE3qGtBCNadWAk6iiaCV+H918OdCw899Akn6ka2tlA6uKJMTnjYh3z19TBZj1pRtj9z0OTmIPejQQD/vptIBwAJ5NRTI5Lfj2IclCyM1wH7cDOv1OIpRYx276CCQG91thZ5PUnw==\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/e0483250110ddbf52f165ec86d1b36279b832cb1\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]3e90d78716c9404daf5a888e2c58387c\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"e0483250110ddbf52f165ec86d1b36279b832cb1\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"g4kIb/s1r7/1Q6VBgE229K6SgYKFiWJEGJ/grCf8\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUZMQHERL4\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a450-141f0a0e30eeb04f38405996;Parent=304544731ef081f7;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:113:5)"],"fullName":"Function Authz Optional | AuthZ | Valid","location":null,"status":"failed","title":"Optional | AuthZ | Valid"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Optional | AuthZ | NoPerm","location":null,"status":"passed","title":"Optional | AuthZ | NoPerm"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-23462535/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:55 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"2973\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAxOC44NiBtcyBhbmQgdXNlZCA1MyBNQiBvZiBtZW1vcnku\",\n  \"etag\": \"W/\\\"b9d-bXxtdkdh2oF2MzrNicbVjnvIqLY\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-23462535\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-23462535/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-23462535/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a452-6fbe6f0f13eb232a550e1d45\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Bearer abcdefg\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n  },\n  \"caller\": {},\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJIMEYCIQCKlPUF/id8pvLpjpuZ7MYTLuNg+knD6GwKf35C+91I3wIhAPGYtWnQBZ/DKJLL3bH2iaxdw5sFD841hwiDt1w0SbglKrYCCOf//////////wEQAhoMNzQ5Nzc1MzQ2ODU3IgwsGDTSmxVCuV+WdvcqigKK4ARFoPK+zs3ByiQwNjldCckCINqqBn85GhBCgly3wBE96BmFnmEPF+ne6oBhHy32upj7/Jbu+YLSE5xDhWsAIFcyGiuuM1laQsmDXgyJDBNMT7CH9CucAHUkugz02XpA/u5hPV35E7/bg0r5cpdylhZGldhk+6KnAbV2F7RuRMx4r+730TnPX0B3SxibVaPhZverknBPgyd8GL982g/d85jIQTSL0UMflUbFtuDHKJzVshZUrOFBYp/VRj5lu9AzaeWOkwLMjmJ2yWNzurwue388urfa8H6WF80s10G86zqeFlLO6OXhiHm/G/VnQbhOtQ2Zo6oAu5c3pRRTz/ceigaZW3bqYIGv3DDSyNqKBjqZAd+F4SXQHc4WwNvG6sn/fElLNfTKG7R3vHisXnWqPgorMbKlzMF4b0oNgVlvW4x2LbK0l30lPD1FJeHXTX1Yuu4LskLy4q5alFgej749elyczT30DVItIFvSJCnDM+yMtfk+LoPgSTKYZ0unhk9LaW5608BJYnijIGHKhzN35HG19QG101pu/0YjdqaJ9voofS3Vx3ntfkL0qQ==\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/16c6eda2a5a150ed72054c056a79575a01f7d6f3\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]f2cf4573a13c4d1f8a11aba02492b589\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"16c6eda2a5a150ed72054c056a79575a01f7d6f3\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"OnsOnLL7uf5JE1TGjDpNytneOs/Aqhldfwnj7NoF\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUWXSINTY4\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a452-74a4e8581409fc511ec3777e;Parent=16235cfd4250f6b4;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:128:5)"],"fullName":"Function Authz Optional | AuthZ | Bad","location":null,"status":"failed","title":"Optional | AuthZ | Bad"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-211344340/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:56 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"2974\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayA5LjYwIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"b9e-9yR6EEuZrXlsaokvzft53MyrH5M\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-211344340\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-211344340/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-211344340/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a454-32c0438f25f9eeea291c0410\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Basic foobar\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n  },\n  \"caller\": {},\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQCsyoUF6HqJFR5gOtO7niEGqNGiZJ4jlYBpRo1GnkK60AIgEJ4YRPCsDbKFHikaoKregcjpDMS/t9G51y8yhY+lDvoqtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDOYgC6ZXvPKkJFxzcSqKAk/GNNP89VhZGJi4cLeDnMf6QGKr59QsG8NfoO/d72SyPSK0WPSltDA6DUrpLBtoE9Tw9asm7MG0ySDj8/wzriXOlCvQJwCIyo5AOHlCE74O+21LtKvQodmKlbPrGhzhLOOdwYmW536h7+io9DZ+CkcfMELWEZtS9FIN+qtTT0XFtQ5lYlp7ye797bBKCUl7mqFaPIYBMfii+b1NM6CyrgsoDe52CqTqT5pfKD1Etc74GjjOO6EaQWH5WGjenG+4OSKYhQbMIBfL6CgviSe1xtGG79e/Ks50O6+RaIF2TJkVpcqmflLruP9oOw6jTl8Oo80LfyHLRJyxkYsI5PEh6VBsxXK6N9eG6BqiMNTI2ooGOpoBY4JjOrh/H4WDEXxi/PT/D5MnXFTnCyqbKg0JSoHQE91StAYhaeTfOPjoeolbjnVHYhWxlCyZLwklxfK3aaC81A+Kpm+Agq8t/Y7TczwEJhes2yxOJUWJ462UBp23hT4yP/DfgJupCH3MtSEp1MMKuczC4lmPiY10qfEHLSi2MfRBHHdBwdJT0ovonGFPgLOHqSqcAGgsS/jxiw==\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/97370775950c0e5d54b394e7841e1cef7c9b7de0\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]18ed79d191c449beaff5ed8c2f8baa34\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"97370775950c0e5d54b394e7841e1cef7c9b7de0\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"M87D/CXr6eit2QCkwI+r4RLr0LSPsgDJD7PsdjE7\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUSFQFJGBT\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a454-55bcbe715a1160dd5f3a0331;Parent=03016b1765810e69;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:135:5)"],"fullName":"Function Authz Optional | AuthZ | Basic","location":null,"status":"failed","title":"Optional | AuthZ | Basic"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-351311227/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:57 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"2943\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAyLjU0IG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"b7f-CPjrgJV9HDWQKpMcyQGS9ajX+74\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-351311227\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-351311227/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-351311227/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a455-4a77717b178067ea61a4620a\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n  },\n  \"caller\": {},\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJGMEQCIHpJDSfTf1j6/s63eBz06rslrjLDWeRQDR8fxXMvTyH3AiB23ikCXzbzFvawZlHQhZ69Rn9lW3DaSdt53MlA9H+MLCq2Agjn//////////8BEAIaDDc0OTc3NTM0Njg1NyIMxP8SF47wRKLV8O+RKooCcba1qyoV2MnMO2kKX6kIx4WVCgXKhxC5n0GMHII0/0Qsi6LCzxa3ZMRGKYg6bX5v/aoNlYnKA7IxYN+1HbjtRNQ82uiskLhsWP9stUqNkpo3kakwSgFLSY0HJeQvZmmXRyILXW+UIsGI+eekCYCtD9SSnYyZbwssbOJUCPS1cgreJknJtBnafk5DZlVoDO6ZVOKeT8w1+RAVVyqtDe5L1BsAmsmk5WtxY4Ul52mydn3OvRApm8bFzy09fJasapdFJ6WYIC8eeic+oyybC0c8s06gly16OaTdiI/lP8qZZUPtBfPyRCt3RaPnHGNJxrCP1kh5shTnmjEqIFnkhJSwXOc28U10LWZBExEw1cjaigY6mwFttgbr8olMDIv1APlMeRc0HmYX1RoxkjCw2G2eD6RRGkw7llvEOMsAR1ntPsTAXnwDVGnF3CzXU1otSrdy3EVT36nBugakS92Wl0zbgm4IwNAmpyuS0kIqqYT1ccV5Q4RgUHXUDyWAPT7u27wHkaNmQx/JrDHopkh9Vs5oXvO5zQFlVsI5pzJtQrIBzLOXE320J4JrYk/5GDz5gw==\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/a453ed6444f65283cfd3ae09dabd66b0ecd46869\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]30fd42c498c6412195d0628a29d3729c\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"a453ed6444f65283cfd3ae09dabd66b0ecd46869\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"Vp4W7XdRI5DXMgvhgaI4UlPnKveOqzWXfg8KaCD8\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SU7K236IW3\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a455-17d3105119ffe9943fa7dd78;Parent=1736654227a9739d;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:151:5)"],"fullName":"Function Authz Optional | AuthZ | Empty","location":null,"status":"failed","title":"Optional | AuthZ | Empty"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-244345123/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:01:58 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"5103\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayA1LjAxIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"13ef-ORQO4cBFwGtLsdU+qEy97FIhj/E\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-244345123\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-244345123/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-244345123/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a456-2592e8d22d5abb7a0d56eb6c\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n  },\n  \"caller\": {\n    \"permissions\": {\n      \"allow\": [\n        {\n          \"action\": \"*\",\n          \"resource\": \"/\"\n        }\n      ]\n    }\n  },\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJGMEQCIFy9+9Ukp8OL05FcC5vdq6U+Yl9P55hO2RCG7/56ozhvAiBEbRhM+OKQLc8WUfBhOhqR2pyGi9kWWCneGbYdhSzNWSq2Agjn//////////8BEAIaDDc0OTc3NTM0Njg1NyIMjspEA6L/kBmZEapvKooCxmv3O7k+DJLz8JWmN4hgDfn2kE6ayab1FwL4bUTa5pQ0OQq3bngsjKg1ja1NjVEaktXbdpAsi+b0jyv5HPu+jmYAqZyan/xug9VYJzDPbBCxsdcOlIn3aJWp2N7HaGzxDwpyYePVNaUtArEcdDhlyP5T5uNsPwpkdp1zQO0fgTpJuhnawZfCSsOkQwDQOvbNU5l6CdrlPvqqNG6gIzvTQ60kSLALhTugdOKpveC/ZBsHxWh8+aTBE3AJLYsjG34SqKcV2GCgB6UDK46gkuQHWMbNXJtA616OQcRFukIVxbrP0q6HazWJOyrP202xQtOEdk7VyHnJn9Az0cxAsrz/j3c5dx7RdMHNT+gw1sjaigY6mwERep/anaqlgARfGIB4p8v+6+fvLmvT7fCnt13whRCQ1fX1V1PrzgcB+P2FfrXE/m3golci2i64EH9AvSG25UsCN7m6buVWbJ+WebnSy2Kkt55p7T7MjnuUO6+EnNeE89DbaGpBK2geHXo5j4wPZFDjQYspJfkv8l+tiVo210dpyCuirM8jKX+HsH1cDS8n4xw8NeNW1tKMiZ5lDg==\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/7d1c1d64487be8cb790f58c2aedc23c10137a9a6\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]888e83470cd94adbbf48685f4d2b2dca\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"7d1c1d64487be8cb790f58c2aedc23c10137a9a6\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"0eGJ3PRG5wbVVEoB3QiBAQCPoEyddU9jCdRovKOQ\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"TZ\": \":UTC\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SU35UDMNHK\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a456-79818e470bcf5ad822020f5d;Parent=58ad1dc33b8a0c3f;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:158:5)"],"fullName":"Function Authz Required | No AuthZ | Valid","location":null,"status":"failed","title":"Required | No AuthZ | Valid"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Required | No AuthZ | Bad","location":null,"status":"passed","title":"Required | No AuthZ | Bad"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Required | No AuthZ | Empty","location":null,"status":"passed","title":"Required | No AuthZ | Empty"},{"ancestorTitles":["Function Authz"],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n\u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n\u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n\u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\nfailing request:\n200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-126616354/test-function-1 - headers: {\n  \"date\": \"Fri, 01 Oct 2021 06:02:02 GMT\",\n  \"content-type\": \"application/json; charset=utf-8\",\n  \"content-length\": \"5103\",\n  \"connection\": \"keep-alive\",\n  \"x-powered-by\": \"Express\",\n  \"access-control-allow-origin\": \"*\",\n  \"access-control-allow-credentials\": \"true\",\n  \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n  \"x-fx-response-source\": \"function\",\n  \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAzLjQxIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n  \"etag\": \"W/\\\"13ef-7j0MXLk9TzLvpcoLBUeAowOooNU\\\"\"\n} - data: {\n  \"accountId\": \"acc-657e7fe7f3044b91\",\n  \"subscriptionId\": \"sub-695bd91985574f01\",\n  \"boundaryId\": \"test-function-authz-9-126616354\",\n  \"functionId\": \"test-function-1\",\n  \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-126616354/test-function-1\",\n  \"method\": \"GET\",\n  \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-126616354/test-function-1\",\n  \"body\": {},\n  \"headers\": {\n    \"x-forwarded-for\": \"73.222.216.85\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-port\": \"443\",\n    \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n    \"x-amzn-trace-id\": \"Root=1-6156a459-4714b4176ee80a17610364d3\",\n    \"accept\": \"application/json, text/plain, */*\",\n    \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n    \"user-agent\": \"axios/0.21.1\"\n  },\n  \"query\": {},\n  \"fusebit\": {\n    \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n  },\n  \"caller\": {\n    \"permissions\": {\n      \"allow\": [\n        {\n          \"action\": \"*\",\n          \"resource\": \"/\"\n        }\n      ]\n    }\n  },\n  \"path\": \"/\",\n  \"configuration\": {\n    \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n    \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJGMEQCIC/tHGJ6+vLfMzcFHYGbj+LmE+pGc3CrkBbETM9gt8FZAiBw0m689JcVo8gOeIQpJuSgDBvLSeo0ZYYwp5UyZTeWIiq2Agjn//////////8BEAIaDDc0OTc3NTM0Njg1NyIM/UkuWq6wVlFxkaZkKooCp/XP4axv+NwxMqqVldz6qO5y6gj/lYVae++Apu/ZiyLkf3j9RUnAg4+9GV0Bll8bjKlBrBuSaNVXssLtMWoZGmMwabgfJ8vBUsZrqyRLVAod3oj/fCSFKxLzDwflFD0chyp5CU5n8mqKgGaQQXxcMjJNoklcW6SZxqtUJ6RM2hjaYVTb+jxoXPWoqpNUZiCUz3sTSdGUUElElK8A7I23HkYAOUx5mumUjK7Ign7JyG1xu5lIUMD6XOeUqJ2ImR4UBrIng3I0Hm8qMP4PHBX+ajtiVNOcj9Kbde35jOChbvxxtFfKcc6qv+UbJOLeo/l3EBXNpB48rfn+Tyn08Ds3e3nMwUKSbOr/WTUw2sjaigY6mwEtQl3zv/g3Ms812j1LeF5Yy2HI/XAbsNHJfl4kv9ogCcMZMn2X8lt7H1NksX/6Ur6fRejzSuJtCXVux+StuHi2dk3iAB17xordMzDQK6kq67Bd1yqmk2s9WeQ3MUiLcvpVAWpXETot80cRWde3s40MisiWMHvyfeHGK3jdZFOsgXgKY49qFLSU9AxbeAAKwPu5eRGeQur+FUHt6Q==\",\n    \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n    \"LAMBDA_TASK_ROOT\": \"/var/task\",\n    \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/1f4e2be44405e2cddeef3e381cae49528123a470\",\n    \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n    \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]104bef647d4b4fc195da3700976ad0b9\",\n    \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n    \"AWS_LAMBDA_FUNCTION_NAME\": \"1f4e2be44405e2cddeef3e381cae49528123a470\",\n    \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n    \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n    \"Q5_LOGS_MAX_BUFFER\": \"100\",\n    \"AWS_DEFAULT_REGION\": \"us-east-2\",\n    \"PWD\": \"/var/task\",\n    \"AWS_SECRET_ACCESS_KEY\": \"gc9QAvwAuJ/ORcg43k3C4OkSQhu8LhQnCiP8v9nE\",\n    \"LANG\": \"en_US.UTF-8\",\n    \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n    \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n    \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n    \"AWS_REGION\": \"us-east-2\",\n    \"TZ\": \":UTC\",\n    \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUZVKFFLNV\",\n    \"SHLVL\": \"0\",\n    \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n    \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n    \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n    \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n    \"_HANDLER\": \"executor.execute\",\n    \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n    \"_X_AMZN_TRACE_ID\": \"Root=1-6156a45a-7658015e6907bad449c819ad;Parent=137c05060fa7b4c6;Sampled=0\"\n  }\n} - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n    at runTest (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:50:20)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at Object.<anonymous> (/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts:177:5)"],"fullName":"Function Authz Required | AuthZ | Valid","location":null,"status":"failed","title":"Required | AuthZ | Valid"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Required | AuthZ | NoPerm","location":null,"status":"passed","title":"Required | AuthZ | NoPerm"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Required | AuthZ | Bad","location":null,"status":"passed","title":"Required | AuthZ | Bad"},{"ancestorTitles":["Function Authz"],"failureMessages":[],"fullName":"Function Authz Required | AuthZ | Empty","location":null,"status":"passed","title":"Required | AuthZ | Empty"}],"endTime":1633068126480,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | No AuthZ | Valid\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-227507753/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:49 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"5103\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayA0Ljg0IG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"13ef-JgLc9qpXVjrz/5J5MkUgP0H949w\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-227507753\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-227507753/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-227507753/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a44c-19f20aa77b811223393053d2\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n        \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n      },\n      \"caller\": {\n        \"permissions\": {\n          \"allow\": [\n            {\n              \"action\": \"*\",\n              \"resource\": \"/\"\n            }\n          ]\n        }\n      },\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJIMEYCIQC50Gyzh1ukSx2RQDNEVKrbKWUIKEm1hmPPLFVsDqhQTAIhAKNjHsn6o8uCe7a0cOVjO+HTwaD3mvrSVc/iIqVFmB79KrYCCOf//////////wEQAhoMNzQ5Nzc1MzQ2ODU3IgxnOE+XSxxxAiqXl0YqigIcXZu2csQNA4K5AAQiMyKj5t6c7fdGseYMO0Pd3cTaQASI4khxvDEL9wmQmQHdQsM0aQXFvHx0GHLC4gPU0Nk6mquH+M0XIrpdDlwmmjTAE1NnAVmLg70wKulM+Jt8oan9gMmUyxZntxeeNc6xNFJ9uPtSCybrCYtq5AdF7p7R72z1qJcaejSK7F4czwTXf3nhTeJkrbNQt13hxl/vciHhJNADpvKIUmNTEkcY9O0M3E4bF6t+dgOKFqq3LxOaxrkYdYF5zIjPyqT3DHrlFhPKhu1ngAhZgJPt+C0zbZtzjiLdXIuv6k7Vn2RUCmylyYF3AUGV9gdmRwk1aT2DvVwlSQfABFIWJLWyzjDNyNqKBjqZAeIPKRWzdLrWP88WL7pOZYVLn3KyBqk55KpTkHx79BOBYGVsCp6oICMDuap4upIGUGAzq5VBn5b3gkRi63ViFPpk8ugzS+APt1j58Tnn0TogUqLpAtNVCkzrDCVeX4kwLCBMkWqF8nZgGYj4DEAGpDrW+lIbATFjv536PSWXw+D1ZDDuKIw3Z72JkL0tKJpEaANZfzNNI7xp8g==\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/4524b0eeedee0cf63a9c5a616435bf93604358a7\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]ca6c8b6615c741d1b59cdcc4455c6220\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"4524b0eeedee0cf63a9c5a616435bf93604358a7\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"YAcgkcjmE4u/XOWHrohwp+1NLlDZYekDZ0UOhrdL\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUTYOWGXPZ\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a44d-24c266ae4762b86c69dd8881;Parent=22b690e837901226;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:92:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | No AuthZ | Bad\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-13333353/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:50 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"2973\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAyLjM5IG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"b9d-/gkG0UStW1G1IqC16gGHT0BJKQo\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-13333353\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-13333353/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-13333353/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a44e-7c43cade6a9284805d85c1bd\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Bearer abcdefg\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n      },\n      \"caller\": {},\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQD0NUB8pPn61gI6LyU4jmcOSyvjykqzhkmzjkByT+YfyQIgDA2XuJHYzx+cHKh7lIIbnSft+xVOEOMoJTNQciQgAwMqtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDDfstD+m99B2Igd8bSqKAkH87NhBR/SZyUAfE8npT6T3UJpm3+AaiVL6A/5ANCWZqUDeNBU/+GDDz3xlAklgCsDrtESPK5jFOgzCgeZBtaX21r7iA0Xe4d9MieK8EpkPcMQtSu0/Jt5VDREhCtyn9/km+uLHXY/ncJ4LsJ7yBUctDGCGhnYYjCXYieWB7gJAM+lQAH+gVvqAGZT57qHdTIHzObM37Hq993slqizciG87T+N763Xzb/MFm/aq5zGsfhwVma3bHkQX4zG0KbLxwCZeHqVnJQ9hOoQOs7S/UUlZP7R1JHg3eq+8i4r/Zs/YYCeM4nfsBaG/xmuZFsxAklnf9rLtzElByo1k1cI0d7k+1jo8dL33GzK9MM7I2ooGOpoB1LsqJgV15/kvPCoVbBnX7X8hvZh6fpBoBWSiRC+euJLhPGuXHM3DjkBDA2qLPKNLy+Yfy8fu7PoSPeowUhHw74qe4AzYN0yHC+jMNF/NKssGdVKnHy/YvaORyo1n93N4B0hXZIN2VmLyHL3PDx76mVL/lHJyIEq5jUILNxFBT6PVnRvOsY1Ft2tvryywhsR62GjrsMX135EOrg==\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/4b16dd2adcbe58c594efc9569953ca573d26592a\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]a030a23b399c4b9a9e19f08bf35e77df\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"4b16dd2adcbe58c594efc9569953ca573d26592a\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"NaI2kbB70CQAUssypamKPoQbrssLbrx3Kbtut/HY\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SU7Y2ZFHCS\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a44e-72bc295852bf8b0c5e7a1e8d;Parent=38bd0e170aeba7c5;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:99:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | No AuthZ | Empty\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-422133445/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:51 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"2943\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAzLjIzIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"b7f-B8t+wgB+NIzH1hION/pDWXWFkRQ\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-422133445\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-422133445/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-422133445/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a44f-71ba5990040f039c29f85ddd\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n      },\n      \"caller\": {},\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQCq0mucjg8yYoDkrTWtw8K2TChDuXVuE3iCU7SXsRSaLQIgP/5144O2NLO+PNufYanEHluOieqPymH1adhvj/hlbJ0qtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDLApAA88uPqRCMxPIiqKAm0gP1V1ctqIaFVwEh4QgrQZFtkrQsorMVLsj7xasEhVjY8z7h2wdjAJvmfBVZUNq6NvZgHD+NLflD5p6VCgrK+1OrtbSPK7f4YgfHvka+ALo5DxYFN55Vs1iTfpdmokp3sggS+1STzecipMXzc2+/td3R5kNlpA1c0SZC8xiywaM2f1sOh/LZhp2DJXba8BePPifKPJlLfYfFy2a4hYS61BkjVpeaqGHIWXvZ0p+sLyIXjZ9K+TxH/SpSk93MeYlRluszUtJzJbqhKzIjYQJoY9FPyApVfLCY88BJUirq+XkALwvDs4A0ShAwMgTVSxk2uIsbMiyC2cGRWxyxpvNVHDIsgxIszLALmYMM/I2ooGOpoBmFiSu5/LEF+xyz6podj14qnrzEi834YdeX2fmNCIv8MsQr1DsppbQtNw4GA8oScZ+0tRs+/XbTOLJi+szKFohW5YSS5H/TE3whrM0b1jMx2/P122Kd0rv16+583F9dq7DmVN2bF08SyOl7d/BT+Nw/lKhZ5n1F36+YgcVzhZT9AZPpCZ4+92uv2hnXqZn6IH/HGEcmzeTdzWZQ==\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/230009f33c05f8051170532e038ce200284e9d64\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]5dac250dc10647aa885f0f870a26cdfd\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"230009f33c05f8051170532e038ce200284e9d64\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"M49ojVPa+wdJplxPssyXfR1KeZjMn9FRauJ+K97I\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUYNMHOU3E\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a44f-40ced66e54d3f8ab7ae6a60f;Parent=4817b9051e6ac6d9;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:106:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | AuthZ | Valid\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-167347340/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:52 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"5103\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAxMi4xMyBtcyBhbmQgdXNlZCA1MyBNQiBvZiBtZW1vcnku\",\n      \"etag\": \"W/\\\"13ef-fkz/DfM7OF7oQgNY2s2mOxK3t1c\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-167347340\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-167347340/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-167347340/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a450-2f11a2e868661ec46fbb670b\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n        \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n      },\n      \"caller\": {\n        \"permissions\": {\n          \"allow\": [\n            {\n              \"action\": \"*\",\n              \"resource\": \"/\"\n            }\n          ]\n        }\n      },\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQCAvtFnffZOcxnAc8OeCeBwkwatUll2wJdV84DzNuF4GwIgcNwZzmNCNw2sKJ0A9GTs9kKY+x3hNefdZ/AGnGy0CAoqtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDKK5MFT0T5XHgS7lRiqKAm7kRrYjFLtd7RKehDy9hqDPThLzPt1w9IRFLF6PmFFRxzTGAz+1J7LrOFymNsipkhWEW6xW+xjdGyRXa9DXMHh6lPUcA4VWaZLTrhkpfi9+dMYgQTG0T3LHJPqs/sNVeVoj43DnX11f50WW/oGPBKGEFwY6aOWSSBofxwRNimPDcqC0HPQ/dQnFTf557zAbFoIUsjcO42ZSEzu2Kj3R3kQL1r7ueAyF+XPpkcv8I08bFWZ8CZtWMQKK8AXtdLR57pcWSMQSPTTW7v1K/W08lytvdEM/+CuKQNkwfbPd25vkXbmc3PdaFj8fJ5DB7uJgbIiupFwdlIGbPeT91n33edl7se0Cqr69q6dUMNDI2ooGOpoB25iJznIRIsdwTNVFoTLnIkc0lX/aE1EJ26bwAw7jWp86q6UflVR2j1HaUE4dbIcpC1OMv+sEE3qGtBCNadWAk6iiaCV+H918OdCw899Akn6ka2tlA6uKJMTnjYh3z19TBZj1pRtj9z0OTmIPejQQD/vptIBwAJ5NRTI5Lfj2IclCyM1wH7cDOv1OIpRYx276CCQG91thZ5PUnw==\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/e0483250110ddbf52f165ec86d1b36279b832cb1\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]3e90d78716c9404daf5a888e2c58387c\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"e0483250110ddbf52f165ec86d1b36279b832cb1\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"g4kIb/s1r7/1Q6VBgE229K6SgYKFiWJEGJ/grCf8\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUZMQHERL4\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a450-141f0a0e30eeb04f38405996;Parent=304544731ef081f7;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:113:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | AuthZ | Bad\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-23462535/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:55 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"2973\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAxOC44NiBtcyBhbmQgdXNlZCA1MyBNQiBvZiBtZW1vcnku\",\n      \"etag\": \"W/\\\"b9d-bXxtdkdh2oF2MzrNicbVjnvIqLY\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-23462535\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-23462535/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-23462535/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a452-6fbe6f0f13eb232a550e1d45\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Bearer abcdefg\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n      },\n      \"caller\": {},\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJIMEYCIQCKlPUF/id8pvLpjpuZ7MYTLuNg+knD6GwKf35C+91I3wIhAPGYtWnQBZ/DKJLL3bH2iaxdw5sFD841hwiDt1w0SbglKrYCCOf//////////wEQAhoMNzQ5Nzc1MzQ2ODU3IgwsGDTSmxVCuV+WdvcqigKK4ARFoPK+zs3ByiQwNjldCckCINqqBn85GhBCgly3wBE96BmFnmEPF+ne6oBhHy32upj7/Jbu+YLSE5xDhWsAIFcyGiuuM1laQsmDXgyJDBNMT7CH9CucAHUkugz02XpA/u5hPV35E7/bg0r5cpdylhZGldhk+6KnAbV2F7RuRMx4r+730TnPX0B3SxibVaPhZverknBPgyd8GL982g/d85jIQTSL0UMflUbFtuDHKJzVshZUrOFBYp/VRj5lu9AzaeWOkwLMjmJ2yWNzurwue388urfa8H6WF80s10G86zqeFlLO6OXhiHm/G/VnQbhOtQ2Zo6oAu5c3pRRTz/ceigaZW3bqYIGv3DDSyNqKBjqZAd+F4SXQHc4WwNvG6sn/fElLNfTKG7R3vHisXnWqPgorMbKlzMF4b0oNgVlvW4x2LbK0l30lPD1FJeHXTX1Yuu4LskLy4q5alFgej749elyczT30DVItIFvSJCnDM+yMtfk+LoPgSTKYZ0unhk9LaW5608BJYnijIGHKhzN35HG19QG101pu/0YjdqaJ9voofS3Vx3ntfkL0qQ==\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/16c6eda2a5a150ed72054c056a79575a01f7d6f3\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]f2cf4573a13c4d1f8a11aba02492b589\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"16c6eda2a5a150ed72054c056a79575a01f7d6f3\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"OnsOnLL7uf5JE1TGjDpNytneOs/Aqhldfwnj7NoF\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUWXSINTY4\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a452-74a4e8581409fc511ec3777e;Parent=16235cfd4250f6b4;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:128:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | AuthZ | Basic\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-211344340/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:56 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"2974\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayA5LjYwIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"b9e-9yR6EEuZrXlsaokvzft53MyrH5M\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-211344340\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-211344340/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-211344340/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a454-32c0438f25f9eeea291c0410\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Basic foobar\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n      },\n      \"caller\": {},\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJHMEUCIQCsyoUF6HqJFR5gOtO7niEGqNGiZJ4jlYBpRo1GnkK60AIgEJ4YRPCsDbKFHikaoKregcjpDMS/t9G51y8yhY+lDvoqtgII5///////////ARACGgw3NDk3NzUzNDY4NTciDOYgC6ZXvPKkJFxzcSqKAk/GNNP89VhZGJi4cLeDnMf6QGKr59QsG8NfoO/d72SyPSK0WPSltDA6DUrpLBtoE9Tw9asm7MG0ySDj8/wzriXOlCvQJwCIyo5AOHlCE74O+21LtKvQodmKlbPrGhzhLOOdwYmW536h7+io9DZ+CkcfMELWEZtS9FIN+qtTT0XFtQ5lYlp7ye797bBKCUl7mqFaPIYBMfii+b1NM6CyrgsoDe52CqTqT5pfKD1Etc74GjjOO6EaQWH5WGjenG+4OSKYhQbMIBfL6CgviSe1xtGG79e/Ks50O6+RaIF2TJkVpcqmflLruP9oOw6jTl8Oo80LfyHLRJyxkYsI5PEh6VBsxXK6N9eG6BqiMNTI2ooGOpoBY4JjOrh/H4WDEXxi/PT/D5MnXFTnCyqbKg0JSoHQE91StAYhaeTfOPjoeolbjnVHYhWxlCyZLwklxfK3aaC81A+Kpm+Agq8t/Y7TczwEJhes2yxOJUWJ462UBp23hT4yP/DfgJupCH3MtSEp1MMKuczC4lmPiY10qfEHLSi2MfRBHHdBwdJT0ovonGFPgLOHqSqcAGgsS/jxiw==\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/97370775950c0e5d54b394e7841e1cef7c9b7de0\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]18ed79d191c449beaff5ed8c2f8baa34\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"97370775950c0e5d54b394e7841e1cef7c9b7de0\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"M87D/CXr6eit2QCkwI+r4RLr0LSPsgDJD7PsdjE7\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUSFQFJGBT\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a454-55bcbe715a1160dd5f3a0331;Parent=03016b1765810e69;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:135:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Optional | AuthZ | Empty\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-351311227/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:57 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"2943\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAyLjU0IG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"b7f-CPjrgJV9HDWQKpMcyQGS9ajX+74\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-351311227\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-351311227/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-351311227/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a455-4a77717b178067ea61a4620a\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\"\n      },\n      \"caller\": {},\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJGMEQCIHpJDSfTf1j6/s63eBz06rslrjLDWeRQDR8fxXMvTyH3AiB23ikCXzbzFvawZlHQhZ69Rn9lW3DaSdt53MlA9H+MLCq2Agjn//////////8BEAIaDDc0OTc3NTM0Njg1NyIMxP8SF47wRKLV8O+RKooCcba1qyoV2MnMO2kKX6kIx4WVCgXKhxC5n0GMHII0/0Qsi6LCzxa3ZMRGKYg6bX5v/aoNlYnKA7IxYN+1HbjtRNQ82uiskLhsWP9stUqNkpo3kakwSgFLSY0HJeQvZmmXRyILXW+UIsGI+eekCYCtD9SSnYyZbwssbOJUCPS1cgreJknJtBnafk5DZlVoDO6ZVOKeT8w1+RAVVyqtDe5L1BsAmsmk5WtxY4Ul52mydn3OvRApm8bFzy09fJasapdFJ6WYIC8eeic+oyybC0c8s06gly16OaTdiI/lP8qZZUPtBfPyRCt3RaPnHGNJxrCP1kh5shTnmjEqIFnkhJSwXOc28U10LWZBExEw1cjaigY6mwFttgbr8olMDIv1APlMeRc0HmYX1RoxkjCw2G2eD6RRGkw7llvEOMsAR1ntPsTAXnwDVGnF3CzXU1otSrdy3EVT36nBugakS92Wl0zbgm4IwNAmpyuS0kIqqYT1ccV5Q4RgUHXUDyWAPT7u27wHkaNmQx/JrDHopkh9Vs5oXvO5zQFlVsI5pzJtQrIBzLOXE320J4JrYk/5GDz5gw==\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/a453ed6444f65283cfd3ae09dabd66b0ecd46869\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]30fd42c498c6412195d0628a29d3729c\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"a453ed6444f65283cfd3ae09dabd66b0ecd46869\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"Vp4W7XdRI5DXMgvhgaI4UlPnKveOqzWXfg8KaCD8\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SU7K236IW3\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a455-17d3105119ffe9943fa7dd78;Parent=1736654227a9739d;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:151:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Required | No AuthZ | Valid\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-244345123/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:01:58 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"5103\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayA1LjAxIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"13ef-ORQO4cBFwGtLsdU+qEy97FIhj/E\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-244345123\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-244345123/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-244345123/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a456-2592e8d22d5abb7a0d56eb6c\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n        \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n      },\n      \"caller\": {\n        \"permissions\": {\n          \"allow\": [\n            {\n              \"action\": \"*\",\n              \"resource\": \"/\"\n            }\n          ]\n        }\n      },\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJGMEQCIFy9+9Ukp8OL05FcC5vdq6U+Yl9P55hO2RCG7/56ozhvAiBEbRhM+OKQLc8WUfBhOhqR2pyGi9kWWCneGbYdhSzNWSq2Agjn//////////8BEAIaDDc0OTc3NTM0Njg1NyIMjspEA6L/kBmZEapvKooCxmv3O7k+DJLz8JWmN4hgDfn2kE6ayab1FwL4bUTa5pQ0OQq3bngsjKg1ja1NjVEaktXbdpAsi+b0jyv5HPu+jmYAqZyan/xug9VYJzDPbBCxsdcOlIn3aJWp2N7HaGzxDwpyYePVNaUtArEcdDhlyP5T5uNsPwpkdp1zQO0fgTpJuhnawZfCSsOkQwDQOvbNU5l6CdrlPvqqNG6gIzvTQ60kSLALhTugdOKpveC/ZBsHxWh8+aTBE3AJLYsjG34SqKcV2GCgB6UDK46gkuQHWMbNXJtA616OQcRFukIVxbrP0q6HazWJOyrP202xQtOEdk7VyHnJn9Az0cxAsrz/j3c5dx7RdMHNT+gw1sjaigY6mwERep/anaqlgARfGIB4p8v+6+fvLmvT7fCnt13whRCQ1fX1V1PrzgcB+P2FfrXE/m3golci2i64EH9AvSG25UsCN7m6buVWbJ+WebnSy2Kkt55p7T7MjnuUO6+EnNeE89DbaGpBK2geHXo5j4wPZFDjQYspJfkv8l+tiVo210dpyCuirM8jKX+HsH1cDS8n4xw8NeNW1tKMiZ5lDg==\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/7d1c1d64487be8cb790f58c2aedc23c10137a9a6\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]888e83470cd94adbbf48685f4d2b2dca\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"7d1c1d64487be8cb790f58c2aedc23c10137a9a6\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"0eGJ3PRG5wbVVEoB3QiBAQCPoEyddU9jCdRovKOQ\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"TZ\": \":UTC\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SU35UDMNHK\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a456-79818e470bcf5ad822020f5d;Parent=58ad1dc33b8a0c3f;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:158:5)\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[1mFunction Authz › Required | AuthZ | Valid\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoMatchObject\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[2m    \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\u001b[22m\n    \u001b[32m-   \"endpoint\": \"http://localhost:3001\",\u001b[39m\n    \u001b[31m+   \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\u001b[39m\n    \u001b[2m  }\u001b[22m on data 'fusebit', expecting {\"callerAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"endpoint\":\"http://localhost:3001\"}\n\n    failing request:\n    200 GET https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-126616354/test-function-1 - headers: {\n      \"date\": \"Fri, 01 Oct 2021 06:02:02 GMT\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"content-length\": \"5103\",\n      \"connection\": \"keep-alive\",\n      \"x-powered-by\": \"Express\",\n      \"access-control-allow-origin\": \"*\",\n      \"access-control-allow-credentials\": \"true\",\n      \"access-control-expose-headers\": \"x-fx-logs,x-fx-response-source,content-length\",\n      \"x-fx-response-source\": \"function\",\n      \"x-fx-logs\": \"TGFzdCBleGVjdXRpb24gdG9vayAzLjQxIG1zIGFuZCB1c2VkIDUzIE1CIG9mIG1lbW9yeS4=\",\n      \"etag\": \"W/\\\"13ef-7j0MXLk9TzLvpcoLBUeAowOooNU\\\"\"\n    } - data: {\n      \"accountId\": \"acc-657e7fe7f3044b91\",\n      \"subscriptionId\": \"sub-695bd91985574f01\",\n      \"boundaryId\": \"test-function-authz-9-126616354\",\n      \"functionId\": \"test-function-1\",\n      \"baseUrl\": \"https://cicd.us-east-2.dev.fusebit.io/v1/run/sub-695bd91985574f01/test-function-authz-9-126616354/test-function-1\",\n      \"method\": \"GET\",\n      \"url\": \"/run/sub-695bd91985574f01/test-function-authz-9-126616354/test-function-1\",\n      \"body\": {},\n      \"headers\": {\n        \"x-forwarded-for\": \"73.222.216.85\",\n        \"x-forwarded-proto\": \"https\",\n        \"x-forwarded-port\": \"443\",\n        \"host\": \"cicd.us-east-2.dev.fusebit.io\",\n        \"x-amzn-trace-id\": \"Root=1-6156a459-4714b4176ee80a17610364d3\",\n        \"accept\": \"application/json, text/plain, */*\",\n        \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\n        \"user-agent\": \"axios/0.21.1\"\n      },\n      \"query\": {},\n      \"fusebit\": {\n        \"endpoint\": \"https://cicd.us-east-2.dev.fusebit.io\",\n        \"callerAccessToken\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\"\n      },\n      \"caller\": {\n        \"permissions\": {\n          \"allow\": [\n            {\n              \"action\": \"*\",\n              \"resource\": \"/\"\n            }\n          ]\n        }\n      },\n      \"path\": \"/\",\n      \"configuration\": {\n        \"AWS_LAMBDA_FUNCTION_VERSION\": \"1\",\n        \"AWS_SESSION_TOKEN\": \"IQoJb3JpZ2luX2VjEH4aCXVzLWVhc3QtMiJGMEQCIC/tHGJ6+vLfMzcFHYGbj+LmE+pGc3CrkBbETM9gt8FZAiBw0m689JcVo8gOeIQpJuSgDBvLSeo0ZYYwp5UyZTeWIiq2Agjn//////////8BEAIaDDc0OTc3NTM0Njg1NyIM/UkuWq6wVlFxkaZkKooCp/XP4axv+NwxMqqVldz6qO5y6gj/lYVae++Apu/ZiyLkf3j9RUnAg4+9GV0Bll8bjKlBrBuSaNVXssLtMWoZGmMwabgfJ8vBUsZrqyRLVAod3oj/fCSFKxLzDwflFD0chyp5CU5n8mqKgGaQQXxcMjJNoklcW6SZxqtUJ6RM2hjaYVTb+jxoXPWoqpNUZiCUz3sTSdGUUElElK8A7I23HkYAOUx5mumUjK7Ign7JyG1xu5lIUMD6XOeUqJ2ImR4UBrIng3I0Hm8qMP4PHBX+ajtiVNOcj9Kbde35jOChbvxxtFfKcc6qv+UbJOLeo/l3EBXNpB48rfn+Tyn08Ds3e3nMwUKSbOr/WTUw2sjaigY6mwEtQl3zv/g3Ms812j1LeF5Yy2HI/XAbsNHJfl4kv9ogCcMZMn2X8lt7H1NksX/6Ur6fRejzSuJtCXVux+StuHi2dk3iAB17xordMzDQK6kq67Bd1yqmk2s9WeQ3MUiLcvpVAWpXETot80cRWde3s40MisiWMHvyfeHGK3jdZFOsgXgKY49qFLSU9AxbeAAKwPu5eRGeQur+FUHt6Q==\",\n        \"LD_LIBRARY_PATH\": \"/var/lang/lib:/lib64:/usr/lib64:/var/runtime:/var/runtime/lib:/var/task:/var/task/lib:/opt/lib\",\n        \"LAMBDA_TASK_ROOT\": \"/var/task\",\n        \"AWS_LAMBDA_LOG_GROUP_NAME\": \"/aws/lambda/1f4e2be44405e2cddeef3e381cae49528123a470\",\n        \"AWS_LAMBDA_RUNTIME_API\": \"127.0.0.1:9001\",\n        \"AWS_LAMBDA_LOG_STREAM_NAME\": \"2021/10/01/[1]104bef647d4b4fc195da3700976ad0b9\",\n        \"AWS_EXECUTION_ENV\": \"AWS_Lambda_nodejs14.x\",\n        \"AWS_LAMBDA_FUNCTION_NAME\": \"1f4e2be44405e2cddeef3e381cae49528123a470\",\n        \"AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129:2000\",\n        \"PATH\": \"/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin\",\n        \"Q5_LOGS_MAX_BUFFER\": \"100\",\n        \"AWS_DEFAULT_REGION\": \"us-east-2\",\n        \"PWD\": \"/var/task\",\n        \"AWS_SECRET_ACCESS_KEY\": \"gc9QAvwAuJ/ORcg43k3C4OkSQhu8LhQnCiP8v9nE\",\n        \"LANG\": \"en_US.UTF-8\",\n        \"LAMBDA_RUNTIME_DIR\": \"/var/runtime\",\n        \"AWS_LAMBDA_INITIALIZATION_TYPE\": \"on-demand\",\n        \"NODE_PATH\": \"/opt/nodejs/node14/node_modules:/opt/nodejs/node_modules:/var/runtime/node_modules:/var/runtime:/var/task\",\n        \"AWS_REGION\": \"us-east-2\",\n        \"TZ\": \":UTC\",\n        \"AWS_ACCESS_KEY_ID\": \"ASIA25EQX3SUZVKFFLNV\",\n        \"SHLVL\": \"0\",\n        \"_AWS_XRAY_DAEMON_ADDRESS\": \"169.254.79.129\",\n        \"_AWS_XRAY_DAEMON_PORT\": \"2000\",\n        \"Q5_LOGS_BUFFER_INTERVAL\": \"100\",\n        \"AWS_XRAY_CONTEXT_MISSING\": \"LOG_ERROR\",\n        \"_HANDLER\": \"executor.execute\",\n        \"AWS_LAMBDA_FUNCTION_MEMORY_SIZE\": \"128\",\n        \"_X_AMZN_TRACE_ID\": \"Root=1-6156a45a-7658015e6907bad449c819ad;Parent=137c05060fa7b4c6;Sampled=0\"\n      }\n    } - account: {\"accountId\":\"acc-657e7fe7f3044b91\",\"subscriptionId\":\"sub-695bd91985574f01\",\"audience\":\"https://cicd.us-east-2.dev.fusebit.io\",\"baseUrl\":\"https://cicd.us-east-2.dev.fusebit.io\",\"accessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjcyNzdhNjBjIiwiand0SWQiOiJjZTcwM2E0ZjBlNTg0MjliOWEwNTQ2OGUzZTAyNDk1MyJ9.eyJpYXQiOjE2MzMwNjgxMDYsImV4cCI6MTYzMzA3NTMwNiwiYXVkIjoiaHR0cHM6Ly9jaWNkLnVzLWVhc3QtMi5kZXYuZnVzZWJpdC5pbyIsImlzcyI6IjkxZGJmNmQwLnVzci1jOTc5ZjJkZWY4YWY0YTk3LmNpY2QudXMtZWFzdC0yLmRldi5mdXNlYml0LmlvIiwic3ViIjoiY2xpLWJjYWJlNDRjIn0.K-xrOHrDXR_06QMHHZBjN5tmckgIn5W_VNx8OU3BoTup5i_VscZsmaBahKkxR95mmk53pWnT3Yfp6DsB7i4NYWAJp38ap8YIH0VqAc9MbICuEMXPG25lAEwwZoAWCNYW68diYoHA8MS2yg1U0syc8_ySgfvsgu8h-ifQ1ERJyECXXerxl_X95tcYic7LTaDs6xwjURouOMUfrhIYGisIW8FlqfSgw9WULtFklQKKKeLMF7Dl8-f8dA0YZdjt1KwNnV9J7SaFEbjAPc3i7D-I0RxshA2pyo1sQTxyjwnH0876beh_-GzzbZdP-yVEsvZYDeI26Rog5v1kzWSQujoUxvpiaf2AnB3sMn2dljnCcLQjVNpvwHZ0zLkqWF18v-KUfFFQKHTxWcm-R_SurnptGhonwijmfwqfhH5a1H0FOg3mJ33Vt37nLANqOea7Gl6u4HG4o3f9XYySBbLaNvR58YByb05p4Ew-4n2gH6UPumk1XwCVJTe1mrdu4K_iRZhuCCTj1VqIWBkjV0fKkrlbZiEkEAPGQVVjGqFvLe2_DVwDdi23m5MNZF2XsQTek5ySYFIEUZs--j6bL8BnonUPHs0BCUi6T7FbQ3bgcv7TVqQEg9-9Pec1F2jJzrIBYNhKS9Jr772A6TnGOt78j-RmpGi_K-YqDTnAiogyvIRRxcc\",\"userAgent\":\"fusebit-test\"}\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 48 | \u001b[39m  }\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m\u001b[31m\u001b[1m>\u001b[2m\u001b[39m\u001b[90m 50 | \u001b[39m  expect(response)\u001b[33m.\u001b[39mtoBeHttp({ statusCode\u001b[33m:\u001b[39m resultCode\u001b[33m,\u001b[39m data\u001b[33m:\u001b[39m resultObj })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m    | \u001b[39m                   \u001b[31m\u001b[1m^\u001b[2m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 | \u001b[39m}\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 52 | \u001b[39m\u001b[0m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 | \u001b[39mdescribe(\u001b[32m'Function Authz'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat runTest (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:50:20)\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[2m\u001b[0m\u001b[36mtest/v1/function.authz.test.ts\u001b[39m\u001b[0m\u001b[2m:177:5)\u001b[2m\u001b[22m\n","name":"/Users/matthew/code/q5/api/function-api/test/v1/function.authz.test.ts","startTime":1633068095630,"status":"failed","summary":""}],"wasInterrupted":false}