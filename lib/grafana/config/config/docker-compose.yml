version: '3'
services:
  tempo:
    image: grafana/tempo:latest
    command: ['-config.file=/etc/tempo.yaml']
    volumes:
      - /root/tempo.yml:/etc/tempo.yaml
      - /root/tempo-data:/tmp/tempo
      - /var/log/:/var/log/
    ports:
      - '4317:4317/udp' # grpc ingest
      - '4317:4317/tcp' # grpc ingest

  loki:
    image: grafana/loki:2.3.0
    command: ['-config.file=/etc/loki/loki-config.yaml']
    volumes:
      - /root/loki-config.yaml:/etc/loki/loki-config.yaml
      - /var/log/:/var/log/
    ports:
      - '3100:3100'

  grafana:
    image: grafana/grafana:latest
    command: ['--config=conf/grafana-config.ini']
    volumes:
      - /root/grafana.ini:/etc/grafana/grafana.ini
      - /var/log/:/var/log/
    ports:
      - '3000:3000'
